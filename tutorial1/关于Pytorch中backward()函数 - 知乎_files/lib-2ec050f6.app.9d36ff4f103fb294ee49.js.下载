"use strict";(self.webpackChunkheifetz=self.webpackChunkheifetz||[]).push([[620],{66392:function(e,t,n){var o=n(20857),i=n(22107),a=n(94707),r=n(87320),s=n(86325),d=n(55164),l=n(57477),c=n(94009),u=n(49899),h=n(85626),p=n(85879),m=n(41402),w=n(63346),f=n(91690),v=n(30037),g=n(10087),A=n(6779),C=n(58216),S=n(48725),_=n(84220),b=n(60811),y=n(67814),k=n.n(y),Z=n(4667),I=n.n(Z),x=n(14168),E=n.n(x),R=n(87363),M=n(14967),T=n(80385),B=n(87641),P=n(3464),N=n(31824),z=n(69383),O=n(51991),D=n(69725),V=n(65423),q=n(31252),U=n(99447),H=n(57730),L=n(19821),F=n(1733),W=n(67516),X=n.n(W),G=n(14214),Q=n(89016),K=n(84069),Y=n(25452),j=n(66223),$=n(8858),J=n(61255),ee=n(50436),et=n(66238),en=n(4757),eo=n(70400),ei=n(258),ea=n(25744),er=n(21680),es=n(28209),ed=n(49906),el=n(80714),ec=n(66263),eu=n(5469),eh=n(74454),ep=n(60736),em=n(57138),ew=n(12421),ef=n(85576),ev=n(22566),eg=n(81552),eA=n(64512),eC=n(8866),eS=n(82335),e_=n(19958),eb=n(40382),ey=n(58909),ek=n(7407),eZ=n(67927),eI=n(40195),ex=n(67036),eE=n(37209),eR=n(71981),eM=n(1606),eT=n(98731),eB=n(99158),eP=n(11264),eN=n(4059),ez=n(65771),eO=n(86193),eD=n(77683),eV=n(7453),eq=n(84344),eU=n(19495),eH=n(11797),eL=n(39980),eF=n(85703),eW=n(30361),eX=n(69661),eG=n(63362),eQ=n(102),eK=n(63573),eY=n(99953),ej=n(71364),e$=n(11584),eJ=n(99446),e0=n(65101),e1=n(62367),e6=n(24752),e4=n(45684),e2=n(8231),e7=n(24794),e5=n(82022),e8=n(8618),e9=n(79100),e3=n(9651),te=n(46284),tt=n(59525),tn=n(14742),to=n(72638),ti=n(41864),ta=function(e){return"plain"===e||"special-plain"===e},tr=function(e){return"special-plain"===e},ts={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},td=function(e){var t=e.thumbnail,n=e.voteupCount,o=e.question.id,i=e.id,a=e.createdTime,r=e.updatedTime,s=e.commentCount;return{image:t,upvoteCount:n,url:"https://www.zhihu.com/question/".concat(o,"/answer/").concat(i),dateCreated:new Date(1e3*a).toISOString(),dateModified:new Date(1e3*r).toISOString(),commentCount:s}},tl=function(e){var t;if(e.videoAnswerData)return e;if(null===(t=e.attachment)||void 0===t?void 0:t.video){var n=e.attachment.video,o=n.title,i=n.subVideoId,a=n.parentVideoId,r=n.zvideoId,s=n.playCount,c=n.voteupCount,u=n.startTime,h=n.creationReferences;return(0,l._)((0,d._)({},e),{videoAnswerData:{videoId:i,zvideoId:r,title:o,playCount:s,voteupCount:c,isComplete:!r||a===i,startTime:u,creationReferences:h}})}return e};function tc(e){var t=(0,ep.AU)(e);return t?e.videoAnswerData&&"object"==typeof e.videoAnswerData?(0,l._)((0,d._)({},e),{creationRelationship:t,videoAnswerData:(0,l._)((0,d._)({},e.videoAnswerData),{creationRelationship:t})}):(0,l._)((0,d._)({},e),{creationRelationship:t}):e}var tu=["zhi-hu-ri-bao-51-41"],th=(0,N.P1)(function(e,t){var n=t.answerFromProps,o=t.answer;return(0,l._)((0,d._)({},n?o:e.entities.answers[o.id]||o),{videoAnswerData:o.videoAnswerData})},function(e,t){var n,o=t.answer;return e.entities.questions[null===(n=o.question)||void 0===n?void 0:n.id]},function(e,t){return t?(0,l._)((0,d._)({},e),{question:(0,d._)({},e.question,t)}):e}),tp=function(e){(0,s._)(n,e);var t=(0,h._)(n);function n(){var e,a,s,c,h,m,w,f;return(0,i._)(this,n),e=t.apply(this,arguments),(0,r._)((0,o._)(e),"state",{commentsShown:!1,commentsAutoFocus:!0,reportModalShown:!1,deleteModalShown:!1,collapseModalShown:!1,favlistsShown:!1,editing:!1,commentPattern:"fixed",addAnnotationModalShown:!1,cancelAnnotationModalShown:!1,guideShown:!1,shareVideoQuery:e.getShareVideoId(),shouldShowVideoDetails:!1,contentExpanded:e.props.expanded,hasFetchedLabels:!1,showWechatExpand:!1,skipModalShow:!1,autoExpand:!1,shownLoadingBar:!1,wxIsReady:!1,rewardModalShown:!1}),(0,r._)((0,o._)(e),"answerFormRef",(0,R.createRef)()),(0,r._)((0,o._)(e),"rewardContainerRef",(0,R.createRef)()),(0,r._)((0,o._)(e),"richContentRef",(0,R.createRef)()),(0,r._)((0,o._)(e),"zaRef",(0,R.createRef)()),(0,r._)((0,o._)(e),"loadEntityWords",I()(function(){var t=e.props,n=t.answer,o=(void 0===n?{}:n).id;(0,t.loadAnswerEntityWords)(o)})),(0,r._)((0,o._)(e),"handleLoadedNext",function(){e.setState({wxIsReady:!0}),e.state.shownLoadingBar&&e.createOpenInAppHandler(e.state.autoExpand?"expand_answer2":"expand_answer1")(),e.setState({shownLoadingBar:!1})}),(0,r._)((0,o._)(e),"showOiaModal",function(){var t=e.props,n=t.blockReading,o=t.itemProp,i=t.isBaidu;("mainEntityOfPage"===o||"acceptedAnswer"===o)&&!(i||document.referrer.includes("sm.cn"))&&n&&e.setState({showWechatExpand:!0,autoExpand:!0})}),(0,r._)((0,o._)(e),"openModal",function(t,n){e.setState((0,d._)({},n)),n.commentsShown?e.props.trackOpenCommentAdPromotion():e.props.trackCloseCommentAdPromotion()}),(0,r._)((0,o._)(e),"openDeleteModal",function(){setTimeout(function(){e.setState({deleteModalShown:!0})})}),(0,r._)((0,o._)(e),"closeModal",function(){e.setState({commentsShown:!1});var t=e.props.onCloseComment;"function"==typeof t&&t(),e.props.trackOpenCommentAdPromotion()}),(0,r._)((0,o._)(e),"closeDeleteModal",function(){e.setState({deleteModalShown:!1})}),(0,r._)((0,o._)(e),"disableAuth",(h=(void 0===(c=(void 0===(s=(a=e.props).router)?{}:s).location)?{}:c).pathname,m=a.isBaidu,w=a.isMobile,f=a.currentUser,w&&!f&&!m&&!h.startsWith("/topic"))),(0,r._)((0,o._)(e),"loadAnswerRelationEndorsement",function(){var t=e.props,n=t.answer,o=t.relationEndorsement,i=t.loadAnswerRelationEndorsement;o||i(n.id)}),(0,r._)((0,o._)(e),"handleExpand",function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.trackUserAction,i=e.props,a=i.onToggleExpand,r=i.trackPromotionClick;a&&a(t),t&&e.loadAnswerRelationEndorsement(),(void 0===o||o)&&t&&r&&r(),e.setState({contentExpanded:t})}),(0,r._)((0,o._)(e),"handleReshipmentSettings",function(t){var n=e.props,o=n.answer.id,i=n.updateAnswerReshipmentSettings,a=n.fillCurrentUserIfNeeded;"need_payment"===t?Promise.resolve(a(["caEnabled"])).then(function(){e.props.currentUser.caEnabled?i(o,t):window.open("/copyright/invite")}):i(o,t)}),(0,r._)((0,o._)(e),"handleLoadAnswerForSettings",function(){var t=e.props,n=t.answer.id;(0,t.loadAnswerForSettings)(n)}),(0,r._)((0,o._)(e),"handleDeleteAnswer",function(){var t=e.props,n=t.answer.id;(0,t.deleteAnswer)(n)}),(0,r._)((0,o._)(e),"handlePositionStatusChange",function(t){e.setState({positionStatus:t})}),(0,r._)((0,o._)(e),"handleCollapseModalShow",function(){e.setState({collapseModalShown:!0})}),(0,r._)((0,o._)(e),"handleCollapseModalHide",function(){e.setState({collapseModalShown:!1})}),(0,r._)((0,o._)(e),"handleUpdateAnswerCollapsed",function(){var t=e.props,n=t.answer,o=n.id,i=n.collapsedBy,a=t.updateAnswerCollapsed,r=t.showNotification;return"community"===i?r("该回答因违反社区规范已被管理员折叠，暂无法公开","red"):a(o)}),(0,r._)((0,o._)(e),"handleUpdateAnswerStick",function(){var t=e.props,n=t.answer.id;return(0,t.updateAnswerStick)(n)}),(0,r._)((0,o._)(e),"handleRestoreAnswer",function(){var t=e.props,n=t.answer,o=n.id,i=n.question;(0,t.restoreAnswer)(i.id,o)}),(0,r._)((0,o._)(e),"handleClickCommentsPreview",function(t){var n=e.props,o=n.isMobile,i=n.relatedTo;o&&"answer"===i&&(t.stopPropagation(),e.setState({commentsShown:!0}))}),(0,r._)((0,o._)(e),"openInApp",function(){(0,ei.Z)({trackEvent:e.zaRef.current.trackEvent,zaV3Text:"评论弹层",noEnteringSignin:!!e.props.currentUser})}),(0,r._)((0,o._)(e),"setEditingState",function(t,n){"function"==typeof e.props.onEditingStateChange&&e.props.onEditingStateChange(t),e.setState({editing:t},n)}),(0,r._)((0,o._)(e),"handleStartEditAnswer",function(){var t=e.props,n=t.draftStatus,o=t.hasPublishingDraft,i=t.isMobile,a=t.isAnswerPage,r=t.showNotification,s=t.answer,d=s.author,l=s.id,c=s.question.id,u=s.question,h=(0,K.i)(u);if((0,K.S)(d)&&""!==h){r(h,"red");return}if(n&&n.loading){H.Z.alert("草稿正在加载中……");return}if(o){H.Z.alert("你有一份对该回答的修改正在发布中，请等待发布完成后再次修改。");return}if(i){e.context.startAddAnswer(e.props.answer.id);return}if(!a||(0,Q.$$)()){(0,Q.aH)(c,l);return}e.setEditingState(!0,function(){var t,n;null===(t=e.answerFormRef.current)||void 0===t||null===(n=t.focus)||void 0===n||n.call(t)})}),(0,r._)((0,o._)(e),"handleCancelEditAnswer",function(){e.setEditingState(!1);var t=e.props,n=t.onCloseEditing,o=t.onCloseComment;"function"==typeof o&&o(),"function"==typeof n&&n()}),(0,r._)((0,o._)(e),"handleSubmitAnswer",function(t){var n=e.props,o=n.answer.id,i=n.answerContentPublish,a=e.props.publishErrorReporter;return null==a||a.safeRecordStageStart("pre-publish"),e.handleCancelEditAnswer(),null==a||a.safeRecordStageStart("publish",{type:"update",hitContentPublish:!0}),i.update(o,t).then(function(t){return z.Z.trackEvent(e.contentItem,{action:"StatusReport"},{status:{result:"Success",event:{action:"Edit"}}}),t})}),(0,r._)((0,o._)(e),"handleReportOpen",function(){var t=e.props.zaInfos.report;z.Z.trackEvent(e.contentItem,(0,d._)({action:"Report",element:"Button",is_intent:!0},t&&{id:t})),e.props.authRequired(function(){return e.setState({reportModalShown:!0})},ec.q0.report)()}),(0,r._)((0,o._)(e),"handleReportHide",function(){e.setState({reportModalShown:!1})}),(0,r._)((0,o._)(e),"handleFavlistsShown",function(t){var n=e.props,o=n.shouldOia,i=n.zaInfos.favlists;if(z.Z.trackEvent(e.favButtonRef,(0,d._)({action:"Collect",element:"Button",is_intent:!0},i&&{id:i})),o){e.createOpenInAppHandler("collect_answer")(t);return}if(e.disableAuth){e.handleToggleGuide();return}e.props.authRequired(function(){return e.setState({favlistsShown:!0})},ec.q0.favlists)()}),(0,r._)((0,o._)(e),"handleFavlistHide",function(){e.setState({favlistsShown:!1})}),(0,r._)((0,o._)(e),"handleLogMoreClick",function(){var t=e.props.zaInfos.options;z.Z.trackEvent(e.contentItem,(0,d._)({action:"Click",element_name:"MoreAction"},t&&{id:t}))}),(0,r._)((0,o._)(e),"handleShowAddAnnotationModal",function(){return e.setState({addAnnotationModalShown:!0})}),(0,r._)((0,o._)(e),"handleCloseAddAnnotationModal",function(){return e.setState({addAnnotationModalShown:!1})}),(0,r._)((0,o._)(e),"handleShowCancelAnnotationModal",function(){return e.setState({cancelAnnotationModalShown:!0})}),(0,r._)((0,o._)(e),"handleCloseCancelAnnotationModal",function(){return e.setState({cancelAnnotationModalShown:!1})}),(0,r._)((0,o._)(e),"handleToggleGuide",function(){e.setState({guideShown:!e.state.guideShown})}),(0,r._)((0,o._)(e),"handleClickVideoMoreButton",function(){e.setState({shouldShowVideoDetails:!1})}),(0,r._)((0,o._)(e),"handleClickTitle",function(t){var n=e.props,o=n.onClickTitle,i=n.trackPromotionClick,a=n.answer.id;t.preventDefault(),null==o||o(a),window.open(e.href),null==i||i()}),(0,r._)((0,o._)(e),"startEditing",function(){var t=e.props,n=t.isAuthor,o=t.editable;t.currentUser&&n&&o&&e.handleStartEditAnswer()}),(0,r._)((0,o._)(e),"addRewardTagline",function(t){var n=e.props.answer.id;(0,ex.OC)(t,n)}),(0,r._)((0,o._)(e),"createOpenInAppHandler",function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.props,a=i.answer,r=a.type,s=a.id,c=i.blockReading,u=i.isSpecialQuestionOrAnswer,h=i.currentUser,p=i.relatedTo;return function(i,a){if(i&&i.preventDefault(),"answer"===p){if(c&&z.Z.trackEvent((0,o._)(e),{id:5550,action:"Click"},{button:{text:"openapp"}}),u)location.href="zhihu://".concat(r,"/").concat(s,"?utm_app_name=zhihu_check");else{var m=ec.t6[a]||ec.t6[t],w=(0,l._)((0,d._)({},c&&{yyb_ckey:"CK1430255776739"}),{preventToOIA:n});ec.dN[m]&&(w.launch_button=ec.dN[m]);var f=ec.ov[a]||ec.ov[t];(0,ei.Z)({trackEvent:e.zaRef.current.trackEvent,zaV3Text:f,noEnteringSignin:!!h,from:t},w)}}}}),(0,r._)((0,o._)(e),"handleReward",function(t,n){var o=e.props.answer.id;e.props.updateAnswerReward(o,n?t:""),X().set("isRewardable",n),e.setState({rewardModalShown:!1})}),(0,r._)((0,o._)(e),"renderLabels",function(){var t=e.props.answer,n=t.isNormal;if((void 0===n||n)&&e.isPaidAnswer&&!(0,eh.Y)(t))return{labels:[],editingLabels:[]};var o=e.props,i=o.canCollapse,a=o.relatedTo,r=o.showReviewingLabel,s=o.hideCommercialInviteLabel,l=e.state,c=l.contentExpanded,u=l.editing,h=(0,tn.gh)({answer:t,canCollapse:i,showReviewingLabel:r}),m=(0,tn.xx)(t),w=(0,tn.Dm)({answer:t,canCollapse:i,hideCommercialInviteLabel:s}),f=(0,tn.fb)(t);if(h||m)return{labels:[h,(0,p.tZ)(eK.Z,(0,d._)({item:{isLabeled:!0}},m),"labels")],editingLabels:[]};var v=(0,eh.Y)(t)?eY.Z:eK.Z,g=[(0,p.tZ)(v,{item:t,commercialProps:w,annotationProps:f,editing:u},"labels")];return{labels:c||a?g:[],editingLabels:g}}),(0,r._)((0,o._)(e),"renderPrefix",function(){var t=e.props,n=t.answer,o=t.relatedTo,i=e.state.contentExpanded;return e.isVideoAnswer&&!e.contentDisplayed&&e.coCreate?(0,p.tZ)(J.xJ,{mb:"4px"}):(0,to.Z)(n,{contentExpanded:i,unescapable:!!o})}),(0,r._)((0,o._)(e),"renderVoteButton",function(){var t=e.props,n=t.answer,o=t.shouldOia,i=t.zaInfos,a=i.voteUp,r=i.voteDown,s=t.isMuteSpecial,c=t.isMuteFreeze,u=t.isAuthor,h=t.currentUser,m=e.state.positionStatus,w=n.question,f=w.questionType,v=w.isMuted,g=n.relationship,A=(void 0===g?{}:g).voting,C=n.attachment,S=n.voteupCount,_="commercial"===f&&v||s||c;return e.isLegacyVideoAnswer?(0,p.tZ)(tt.Z,{answer:n,id:C.attachmentId,voteupCount:S,voting:A,isOwner:u,disabled:_,currentUser:h}):(0,p.tZ)(e9.Z,(0,l._)((0,d._)({answer:n,disabled:_,isOwner:u},o&&{onClick:e.createOpenInAppHandler("vote_answer")}),{disableAuth:e.disableAuth,handleToggleGuide:e.handleToggleGuide,positionStatus:m,zaIds:{voteUp:a,voteDown:r}}),"vote")}),(0,r._)((0,o._)(e),"renderAuthorInfo",function(){var t=e.props,n=t.preset,o=t.relatedTo,i=t.answer,a=i.id,r=i.author,s=i.creationRelationship,d=t.trackToggleFollowAdPromotion;if(!e.coCreate)return!tr(n)&&(0,p.tZ)(eD.Z,{className:k()("AnswerItem-authorInfo",{"AnswerItem-authorInfo--related":o}),preset:ta(n)?"plain":"default",author:r,relatedTo:o,id:a,userLinkV2:!0,onToggleFollow:d},"authorInfo");var l=!tr(n);return(0,J.SF)(n,r,s,l)}),(0,r._)((0,o._)(e),"renderMetaAndBeforeContent",function(){var t,n,o=e.props,i=o.preset,a=o.answer.creationRelationship,r=e.renderAuthorInfo(),s=e.renderAnswerExtraInfo(),d=e.renderLabels().labels,l=null==a?void 0:null===(t=a.coCreation)||void 0===t?void 0:t.refBy,c=null==a?void 0:null===(n=a.reference)||void 0===n?void 0:n.refBy,h=e.contentDisplayed&&(l||c)&&(0,p.tZ)(B.xu,{my:"16px",children:(0,p.tZ)(J.j7,{type:"answer",coCreationRefBy:l,referenceRefBy:c})});return ta(i)?[[r].concat((0,u._)(d),[h]),s]:[[r].concat((0,u._)(d),[h,s]),null]}),e}return(0,a._)(n,[{key:"isPaidAnswer",get:function(){var e=this.props.answer;return(0,eh.tk)(e)}},{key:"isVideoAnswer",get:function(){var e=this.props.answer.attachment;return(null==e?void 0:e.type)===2||(null==e?void 0:e.type)==="zvideo"||(null==e?void 0:e.type)==="video"}},{key:"isLegacyVideoAnswer",get:function(){var e=this.props.answer.attachment;return(null==e?void 0:e.type)==="zvideo"}},{key:"isAuthorInGeneral",get:function(){var e=this.props,t=e.isAuthor,n=e.isSubAuthor,o=e.hideCoCreationFeature;return t||n&&!o}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expanded,o=t.byComment,i=t.editing,a=t.loadVideoDetails,r=t.isSearchSpecialSource,s=t.isMobile,d=t.isWechat,l=this.state.shareVideoQuery;if(l&&a(l).then(function(){e.setState({shouldShowVideoDetails:!0})}),n&&(this.loadAnswerRelationEndorsement(),this.loadEntityWords()),o&&setTimeout(function(){return e.setState({commentsShown:!!o})}),i&&this.startEditing(),s&&!r&&this.showOiaModal(),s&&d){if(document.addEventListener("WeixinJSBridgeReady",function(){e.handleLoadedNext()}),"complete"===document.readyState)this.handleLoadedNext();else{var c=function(){window.removeEventListener("load",c),e.handleLoadedNext()};window.addEventListener("load",c)}}}},{key:"componentDidUpdate",value:function(e,t){!t.contentExpanded&&this.state.contentExpanded&&this.loadEntityWords(),!this.props.editing||e.editing||this.state.editing||this.startEditing()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=this.props.answer,o=n.reshipmentSettings,i=n.commentPermission,a=e.answer,r=a.reshipmentSettings,s=a.commentPermission;!o&&r&&!i&&s&&setTimeout(function(){return t.settingsTogglerEl.click()})}},{key:"getShareVideoId",value:function(){var e=this.props,t=e.location;return e.isMobile?t.query.preview_video_id:null}},{key:"renderReshipmentSettings",value:function(e){var t=this,n=this.props.currentUser;return Object.keys(ts).map(function(o){return"need_payment"===o&&(null==n?void 0:n.isOrg)?null:(0,p.tZ)(eR.Z,{onClick:function(){return t.handleReshipmentSettings(o)},checked:o===e,children:ts[o]},o)})}},{key:"renderAnswerExtraInfo",value:function(){var e=this.props,t=e.answer,n=e.isHuman,o=e.isMobile,i=e.relationEndorsement,a=t.id,r=t.voteupCount,s=t.isNormal;return(!n||!o)&&(void 0===s||s)&&(null==i?void 0:i.text)?(0,p.tZ)(e5.Z,{id:a,relationEndorsement:i,voteupCount:r},"AnswerItemExtraInfo"):null}},{key:"renderSettings",value:function(){var e=this,t=this.props,n=t.answer,o=n.id,i=n.answerType,a=n.collapsedBy,r=n.reshipmentSettings,s=n.commentPermission,d=n.question.questionType,l=n.rewardInfo,c=void 0===l?{}:l,u=c.isRewardable,h=void 0!==u&&u,m=c.canOpenReward,w=n.relevantInfo,f=n.creationRelationship,v=t.isAuthor,g=t.answer,C=t.canCollapse,S=t.isMobile,_=t.currentUser,b=t.renderExtraOptions;if(!_||!this.isAuthorInGeneral)return null;var y="paid_column_content"===i,k=!(v&&_&&"organization"===_.userType)&&v&&m,Z=(0,p.BX)(p.HY,{children:[!y&&this.renderReshipmentSettings(r),!y&&(0,p.tZ)(F.R,{}),(0,p.tZ)(eu.rt,{className:"AnswerItem-selectMenuItem",target:g,onChange:this.props.updateAnswerCommentPermission,current:s}),(h||k||!y)&&(0,p.tZ)(F.R,{}),(h||k)&&(0,p.tZ)(F.sN,{onClick:function(){return e.setState({rewardModalShown:!0})},children:(k?"开启":"关闭")+"送礼物"}),!y&&(0,p.tZ)(F.sN,{onClick:this.openDeleteModal,children:"删除"}),"commercial"===d&&C&&"nobody"===a&&(!w||"brand_special"!==w.relevantType)&&[(0,p.tZ)(F.R,{},"MenuDivider"),(0,p.tZ)(F.sN,{onClick:this.handleUpdateAnswerCollapsed,children:"隐藏"},"MenuItem")],b&&b({itemClassName:"AnswerItem-selfMenuItem",getContainer:function(){return e.contentItem}})]});if(r&&s){var I,x,E=null==f?void 0:null===(I=f.coCreation)||void 0===I?void 0:null===(x=I.bizInfo)||void 0===x?void 0:x.canCancelPermission;return(0,p.BX)("div",{className:"ContentItem-action",children:[(0,p.tZ)(F.ZP,{arrowed:!!E,toggler:(0,p.tZ)(Y.ZP,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t},icon:A.T,label:!S&&"设置"}),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem",children:E?(0,p.tZ)(F.sN,{children:(0,p.tZ)(J.ZY,{contentType:"answer",contentId:o})}):Z},"settings"),this.state.rewardModalShown&&(0,p.tZ)(er.Z,{isClose:!k,submitRewardText:function(t){return e.handleReward(t,k)},onClose:function(){return e.setState({rewardModalShown:!1})}})]})}return(0,p.tZ)(Y.ZP,{preset:"plain",onClick:this.handleLoadAnswerForSettings,icon:A.T,label:!S&&"设置"},"settings")}},{key:"renderReshipment",value:function(e,t){var n=this;return"need_payment"===t?(0,p.tZ)(F.sN,{onClick:function(){z.Z.trackEvent(n.contentItem,{action:"Authorize",element:"Button",is_intent:!0})},tag:"a",href:"/copyright/apply?answer=".concat(e),target:"_blank",children:"申请授权"}):"disallowed"===t?(0,p.tZ)(F.sN,{tag:"a",target:"_blank",href:"/term/zhihu-terms#sec-licence-6",children:"禁止转载"}):null}},{key:"renderOptions",value:function(){var e=this;if(!this.props.currentUser||this.isAuthorInGeneral)return null;var t=this.props,n=t.answer,o=t.canCollapse,i=t.renderExtraOptions,a=t.permission.canBrandAdminEdit,r=t.isMobile,s=t.isAuthor,c=n.id,u=n.reshipmentSettings,h=n.collapsedBy,w=n.question,f=w.questionType,v=w.brand,g=(void 0===v?{}:v).isPuQuestion,A=n.annotationAction,S=void 0===A?[]:A,_=n.annotationDetail,b={toggler:(0,p.tZ)(Y.ZP,{preset:"plain",className:"OptionsButton",icon:C.AZ,"aria-label":"更多"}),reversed:!0,onOpen:this.handleLogMoreClick,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selfMenuItem"},y="commercial"===f,k="nobody"!==h;return s?null:(0,m.az)(F.ZP,(0,l._)((0,d._)({},b),{key:"options",children:[r&&(0,p.tZ)(eT.HS,{answer:n}),o&&!y&&(0,p.tZ)(F.sN,{onClick:k?this.handleUpdateAnswerCollapsed:this.handleCollapseModalShow,children:k?"取消隐藏":"隐藏"}),a&&y&&!k&&!g&&(0,p.tZ)(F.sN,{onClick:this.handleUpdateAnswerCollapsed,children:"隐藏"}),S&&S.some(function(e){return ec.jB.add===e})&&!_&&(0,p.tZ)(F.sN,{onClick:this.handleShowAddAnnotationModal,children:"标记内容"}),S&&S.some(function(e){return ec.jB.cancel===e})&&_&&(0,p.tZ)(F.sN,{onClick:this.handleShowCancelAnnotationModal,children:"撤销标记"}),(0,p.tZ)(O.$U,{zaAction:"Report",zaType:"Button",zaModuleId:"click_report",as:F.sN,onClick:this.handleReportOpen,children:"举报"}),this.renderReshipment(c,u),i&&i({itemClassName:"AnswerItem-selfMenuItem",getContainer:function(){return e.contentItem}})]}))}},{key:"renderMeta",value:function(){var e=td(this.props.answer);return Object.keys(e).map(function(t){return(0,p.tZ)("meta",{itemProp:t,content:e[t]},t)})}},{key:"renderBrandQuestionPrizeTip",value:function(){var e=this.props.answer,t=e.id,n=e.question.prize,o=void 0===n?{}:n,i=o.winnersAnswerTokens,a=o.prizes;if(!o.status)return null;var r=["一","二","三"],s=null;return a&&i&&i.forEach(function(e,n){e.includes(t)&&null===s&&(s=a&&a[1]&&a[1].name?"得".concat(r[n],"等奖"):"奖")}),s&&(0,p.BX)("div",{className:"AnswerItem-brandQuestionPrizeTip",children:["该回答在有奖问答中获",s]})}},{key:"renderBrandEntityTrack",value:function(){var e=this.state.contentExpanded,t=this.props,n=t.answer,o=t.expanded,i=t.isBrandAnswer,a=n.question;return(o||e)&&(a&&"commercial"===a.questionType||i)?(0,p.tZ)(eV.Z,{type:n.type,id:n.id}):null}},{key:"renderEditTime",value:function(){var e,t,n,o=this.props,i=o.shouldOia,a=o.answer,r=a.createdTime,s=a.updatedTime,c=a.playCount,u=a.attachment,h=a.ipInfo,m=c||(null==u?void 0:null===(e=u.zvideo)||void 0===e?void 0:e.playCount)||(null==u?void 0:null===(t=u.video)||void 0===t?void 0:null===(n=t.videoInfo)||void 0===n?void 0:n.playCount)||0;return(0,p.tZ)(e2.O,(0,l._)((0,d._)({created:r,updated:s,href:this.href},this.isVideoAnswer&&m>0&&{videoPlayCount:Number(m)},i&&{onClick:this.createOpenInAppHandler("click_answer")}),{ipInfo:h}))}},{key:"renderContentSource",value:function(){var e,t=null===(e=this.props.answer)||void 0===e?void 0:e.contentSourceText;return!!t&&(0,p.tZ)(B.xv,{color:"MapInfoSub",fontSize:"12px",lineHeight:"16px",mt:"4px",children:t})}},{key:"contentDisplayed",get:function(){var e=this.props.relatedTo,t=this.state.contentExpanded;return!!(e||t)}},{key:"coCreate",get:function(){var e=this.props,t=e.answer.creationRelationship;return!!(!e.hideCoCreationFeature&&(0,J.HE)(t))}},{key:"href",get:function(){var e=this.props.answer,t=e.id,n=e.question.id;return"//".concat(el.Z.wwwHost,"/question/").concat(n,"/answer/").concat(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.answer,o=t.reward,i=t.answer,a=i.id,r=i.isNormal,s=void 0===r||r,u=i.isDelete,h=i.question,m=i.rewardInfo,v=void 0===m?{}:m,A=i.question,C=A.title,y=A.id,Z=A.questionType,I=A.brand,x=(void 0===I?{}:I).isPuQuestion,E=i.author,R=i.excerpt,M=i.content,T=i.editableContent,P=i.commentCount,N=i.adminClosedComment,z=i.collapsedBy,q=i.isSticky,U=i.thumbnail,F=i.thumbnailExtraInfo,W=i.reviewInfo,X=void 0===W?{}:W,Q=X.isReviewing,K=X.editType,J=i.relevantInfo,ee=(void 0===J?{}:J).relevantType,ei=i.annotationDetail,er=i.paidInfo,el=void 0===er?{}:er,eu=i.creatorRightsNotification,ep=i.attachment,ef=i.videoAnswerData,ev=i.contentNeedTruncated,eg=i.forceLoginWhenClickReadMore,eA=t.relatedTo,eC=t.editable,eS=t.byComment,e_=t.draft,eb=t.expanded,ey=t.lastreadTouchable,ek=t.canCollapse,eZ=t.canStick,eI=t.itemProp,ex=void 0===eI?"answer":eI,eE=t.addAnnotation,eR=t.cancelAnnotation,eM=t.showNotification,eP=t.dataZaIndex,eD=t.blockReading,eV=t.isWechat,eK=t.isHuaweiBrowser,eY=t.isHonor,e5=t.lessExcerpt,e9=t.isHuman,tt=t.ua,tn=t.shouldSpecialOia,to=t.shareVideoDetail,ti=t.formatContent,ta=t.zaInfos,tr=ta.expand,ts=ta.title,td=ta.thank,tl=ta.toggleComment,tc=ta.share,tu=ta.getCommentAction,th=t.handleToggleSticky,tp=t.enableShowStickyMark,tm=t.renderActionButtons,tw=t.permission.canBrandAdminEdit,tf=t.readContentRightsNotification,tv=t.ecommerce,tg=t.isMobile,tA=t.canAbstract,tC=t.isBaidu,tS=t.isMuteSpecial,t_=t.isMuteFreeze,tb=t.isAuthor,ty=t.shouldHidePaidIntroWhenCollapsed,tk=t.xiaomi,tZ=t.showCommentForOia,tI=t.pathname,tx=t.richContentKey,tE=t.shouldAlwaysShowPlayer,tR=t.isShenma,tM=t.isRecommend,tT=t.videoRef,tB=t.alwaysShowVolumeButton,tP=t.showHeightLight,tN=void 0!==tP&&tP,tz=t.truncateDisabled,tO=t.forceCommentOia,tD=void 0!==tO&&tO,tV=t.hideCoCreationFeature,tq=t.entityWords,tU=t.isAnswerPage,tH=t.currentUser,tL=t.blockStrategies,tF=t.trackShareAdPromotion,tW=t.trackPublishCommentAdPromotion,tX=t.adHint,tG=t.paidContent,tQ=t.paidColumnContent,tK=(0,eB.Z)([(0,eB.m)(tL)],tm),tY="function"==typeof th,tj=this.state,t$=tj.reportModalShown,tJ=tj.deleteModalShown,t0=tj.collapseModalShown,t1=tj.favlistsShown,t6=tj.editing,t4=tj.commentsShown,t2=tj.commentsAutoFocus,t7=tj.commentPattern,t5=tj.addAnnotationModalShown,t8=tj.cancelAnnotationModalShown,t9=tj.positionStatus,t3=tj.shareVideoQuery,ne=tj.shouldShowVideoDetails,nt=tj.contentExpanded,nn=tj.showWechatExpand,no=tj.skipModalShow,ni=tj.autoExpand,na=tj.shownLoadingBar,nr=tj.wxIsReady,ns=null==ep?void 0:null===(np=ep.video)||void 0===np?void 0:np.campaign,nd=t3&&ne?{title:to.title,thumbnail:to.coverUrl,isLens:!0,id:t3,isPlayable:!0,url:"https://www.zhihu.com/video/".concat(t3)}:null;if(u)return(0,p.BX)("div",{className:"AnswerItem-deleted",children:["你已经删除了该问题的回答，如果需要修改，请先 \xa0",(0,p.tZ)("a",{role:"button",tabIndex:0,onClick:this.handleRestoreAnswer,children:"撤销删除"})]});var nl=!this.isVideoAnswer||!(Q&&"create"===K),nc="commercial"===Z,nu="nobody"!==z,nh=U||(null==ep?void 0:null===(nm=ep.video)||void 0===nm?void 0:null===(nw=nm.videoInfo)||void 0===nw?void 0:nw.thumbnail);if(t6){var np,nm,nw,nf,nv=ez.Z,ng=(0,p.BX)("div",{children:[(0,p.BX)(B.kC,{alignItems:"center",justifyContent:"space-between",css:function(e){return[{borderBottom:"1px solid ".concat(e.colors.GBK09A),".Tabs":{border:"none"}},{background:e.colors.GBK99A}]},children:[(0,p.tZ)("div",{css:function(e){return[{fontWeight:"bold",fontSize:15,color:e.colors.GBK03A,borderBottom:"1px solid ".concat(e.colors.GBK10A)},{borderBottom:"none",paddingLeft:20}]},children:this.isVideoAnswer?"本回答为视频回答":"本回答为图文回答"}),(0,p.tZ)(eO.Z,{handleClick:null===(nf=this.answerFormRef.current)||void 0===nf?void 0:nf.toggleFullscreen})]}),(0,p.tZ)(nv,{className:"AnswerItem-form",scene:"AnswerItem",isReediting:!0,imperativeRef:this.answerFormRef,question:h,answer:n,defaultValue:T,onDeleteDraft:this.handleCancelEditAnswer,onCancel:this.handleCancelEditAnswer,onSubmit:this.handleSubmitAnswer,isRewardable:v.isRewardable,addRewardTagline:this.addRewardTagline,useMediumEditor:!0})]});return tU?(0,p.tZ)(G.Z,{children:(0,p.tZ)(L.ZP,{css:{overflow:"visible"},children:(0,p.BX)("div",{css:function(e){return{background:e.colorMod(e.colors.GBK10C).alpha(.45)}},children:[(0,p.tZ)(es.Z,{}),ng]})})}):ng}var nA=(0,c._)(this.renderMetaAndBeforeContent(),2),nC=nA[0],nS=nA[1],n_="mainEntityOfPage"===ex||"acceptedAnswer"===ex,nb=tn&&!n_,ny=!nd&&this.renderEditTime(),nk=el.type,nZ=el.content,nI=this.isPaidAnswer,nx=nI?nZ:M,nE=!eA&&(0,p.tZ)(e3.Z,{questionId:y,title:C,href:this.href,zaTitleId:ts,showStickyMark:(tY||tp)&&this.props.isSticky,extraMark:this.props.extraMark,showHeightLight:tN,onClick:this.handleClickTitle}),nR=s||tb,nM=tk&&tI.match(/\/question\/\d+$/g),nT=ti?ti(nx||R,n):nx||R||"",nB=ef&&(tE||this.contentDisplayed),nP=tM&&this.isVideoAnswer,nN=tg&&"answer"===eA;return(0,p.BX)(eW.ZP,{onRef:function(t){return e.contentItem=t},className:"AnswerItem","data-za-index":eP,"data-zop":JSON.stringify({authorName:null==E?void 0:E.name,itemId:a,title:C,type:"answer"}),data:n,link:this.href,meta:nP?null:nC,title:nE,lastreadTouchable:ey,name:a,itemProp:ex,itemType:"http://schema.org/Answer",itemScope:!0,children:[s&&(!ty||nt)&&(0,p.BX)(p.HY,{children:[(0,p.tZ)(e8.m,{answer:n}),(0,eh.XV)(n)&&(0,p.tZ)(w._5,{data:tG})]}),this.renderMeta(),nc&&this.renderBrandQuestionPrizeTip(),this.renderBrandEntityTrack(),nR?(0,p.BX)(p.HY,{children:[this.isVideoAnswer&&(0,p.tZ)(g.eb,{data:F,children:(0,p.tZ)(te.Z,(0,l._)((0,d._)({shouldExpand:this.contentDisplayed,showPlayer:nB,campaign:ns,answer:n,videoAnswerData:ef,videoRef:tT,alwaysShowVolumeButton:tB},nP?{meta:nC}:{}),{hideCoCreationFeature:tV,isRecommend:tM}))}),(0,p.BX)(e2.Z,(0,l._)((0,d._)((0,l._)((0,d._)({entityWords:tq,richContentKey:tx,forceLoginWhenClickReadMore:eg,className:k()({"RichContent-mobileBaidu":tC,"RichContent-hasCatalog":(0,$.Z)(n,"answer"),"AnswerItem-highlight":tN}),truncateDisabled:void 0!==tz&&tz,imperativeRef:this.richContentRef,canAbstract:tA,onToggleExpend:this.handleExpand},nb&&{expandText:"阅读全文"},eD&&n_&&{expandText:"展开阅读全文"},tg&&e9&&!n_&&{collapsedHeight:180}),{cover:this.isVideoAnswer&&tE?null:nh,hasVideo:!tE&&!!(F&&"video"===F.type)||this.isVideoAnswer,videoData:nd,handleClickVideoMoreButton:this.handleClickVideoMoreButton,unescapable:!!eA,expanded:eb,onPositionStatusChange:this.handlePositionStatusChange,before:nS,excerpt:ti?ti(R,n):R,html:nT,prefix:this.renderPrefix(),isNovel:"interactive_novel"===nk,ecommerce:tv,forceSticky:nN,isVideoAnswer:this.isVideoAnswer,contentNeedTruncated:ev,after:(0,p.BX)("div",{children:[nI&&(0,p.tZ)("div",{className:"Copyright-TxtBottom",children:"\xa9 本内容版权为知乎及版权方所有，侵权必究"}),(0,p.tZ)(e8.v,{answer:n,ua:tt,isAnswerPage:tU}),(0,eh.XV)(n)&&(0,p.tZ)(w.ED,{data:tG}),(0,eh.Y)(n)&&(0,p.tZ)(f.a,{data:tQ,isContentPage:tU}),!tg&&nt&&(0,p.tZ)(e0.Z,{contentType:"answer",contentToken:a,author:E}),ny,this.renderContentSource(),tH&&tb&&eC&&(0,p.tZ)(eo.SV,{children:(0,p.BX)("a",{className:"AnswerItem-editButton",role:"button",tabIndex:0,onClick:this.handleStartEditAnswer,children:[(0,p.tZ)(S.E,{text:!0,center:!0})," ",(0,p.BX)("span",{className:"AnswerItem-editButtonText",children:["修改",e_&&e_.editableContent&&"（有未发布的编辑草稿）"]})]})}),!tg&&tH&&!(0,eh.Y)(n)&&(0,p.tZ)(e4.Z,{imperativeRef:this.rewardContainerRef,reward:o,currentUser:tH,rewardInfo:v,isAuthor:tb,id:a,author:E,ua:tt,balanceEnable:!1}),n_&&!tg&&(0,p.tZ)(e1.r,{id:n.id})]}),data:n,onClick:eD&&n_?function(){(nM||eV||tR)&&tg?(e.setState({autoExpand:!1}),e.richContentRef.current.handleExpand()):tg?ec.dd?(e.setState({autoExpand:!1}),e.richContentRef.current.handleExpand()):e.setState({skipModalShow:!0,autoExpand:!1}):e.setState({showWechatExpand:!0,autoExpand:!1})}:nb?ec.dd&&tg?function(){e.richContentRef.current.handleExpand()}:e.createOpenInAppHandler("expand_answer"):e.disableAuth&&eD&&e.handleToggleGuide}),e5?{limit:74}:{},this.coCreate?{limitWithImage:74}:{}),{zaIds:{expand:tr},children:[nl&&tw&&nc&&nu&&!x&&(0,p.tZ)(Y.ZP,{className:k()("ContentItem-rightButton AnswerItem-mainAction AnswerItem-open",{"AnswerItem-mainAction--disabled":"community"===z}),onClick:this.handleUpdateAnswerCollapsed,children:"公开回答"}),nl&&eZ&&!nu&&"brand_special"!==ee&&(0,p.tZ)(Y.ZP,{className:"ContentItem-rightButton AnswerItem-mainAction AnswerItem-brandQuestionButton",onClick:this.handleUpdateAnswerStick,children:q?"取消精选":"设为精选"}),!this.props.isBaidu&&tK({componentList:[{name:"vote",component:nl&&this.renderVoteButton()},{name:"comment",component:nl&&!(tg&&"answer"!==eA)&&(0,p.tZ)(eU.Z,(0,l._)((0,d._)({onInstance:function(t){return e.commentButton=t},onClick:this.openModal},(tg&&e9&&tn||tD)&&{onClick:function(t){if(nN){e.openModal(t,{commentsShown:!0});return}e.createOpenInAppHandler("comment_answer")}}),{commentsShown:t4,commentClosed:N,count:P,positionStatus:t9,zaInfos:{toggleComment:tl,getCommentAction:tu}}),"comment")},{name:"share",component:nl&&!tg&&(0,p.tZ)(e7.Z,{disabled:tS||t_,id:a,type:"answer",title:C,authorName:E&&E.name,href:this.href,positionStatus:t9,zaShareId:tc,onShare:tF},"share")},{name:"favlist",component:nl&&!(tg&&"answer"!==eA)&&(!tH||!tH.isOrg)&&(0,p.tZ)(eG.Z,{onRef:function(t){return e.favButtonRef=t},onClick:this.handleFavlistsShown,label:tg?"":"收藏",disabled:tS||t_},"favlist")},!tg&&{name:"thank",component:nl&&!tb&&(0,p.tZ)(eT.HS,(0,d._)({zaInfo:td,answer:n,disabled:tS||t_},this.isLegacyVideoAnswer&&{zVideoId:ep.attachmentId}),"thank")},{name:"sticky",component:!tg&&tY&&tb&&(0,ew.U)(tH)&&(0,p.tZ)(Y.ZP,{preset:"plain",onClick:th,icon:this.props.isSticky?_.TX:b.rh,label:this.props.isSticky?"取消置顶":"置顶"},"sticky")},{name:"options",component:tg&&e9||nl&&this.renderOptions()},{name:"settings",component:tg&&e9||this.renderSettings()},{name:"annotation",component:!nt&&(0,p.tZ)(eN.Z,{annotationDetail:ei},"annotation")}]}),tX&&(0,p.tZ)(j.Z,{tag:tX})]}))]}):ny,nR&&!nI&&(0,p.tZ)(eq.Z,{content:nx,type:"answer",urlToken:String(a)}),tZ&&tI.startsWith("/question")&&nN&&(0,p.tZ)("div",{role:"tablist",tabIndex:0,onClick:this.handleClickCommentsPreview,onKeyDown:function(t){"Enter"===t.key&&e.handleClickCommentsPreview(t)},children:(0,p.tZ)(et.Z,{parent:n})}),(0,p.tZ)(O.pS,{ref:this.zaRef}),(0,p.tZ)(eL.Z,{shown:t4,parent:n,byComment:eS,commentPattern:t7,autoFocus:t2,onClose:this.closeModal,commentPlugin:eH.Z,onComment:tW}),(0,p.tZ)(e6.y,{type:"answer",urlToken:a,shown:t$,onClose:this.handleReportHide,zaEnabled:!0}),(0,p.tZ)(D.Z,{addAnnotation:eE,onClose:this.handleCloseAddAnnotationModal,shown:t5,type:ec.R8,urlToken:a,showNotification:eM}),(0,p.tZ)(V.Z,{cancelAnnotation:eR,onClose:this.handleCloseCancelAnnotationModal,shown:t8,type:ec.R8,urlToken:a,showNotification:eM}),tH&&tb&&(0,p.tZ)(eF.Z,{title:"你确定要删除自己的答案吗？",subtitle:"答案内容不会被永久删除，你还可以撤消本次删除操作。",shown:tJ,onCancel:this.closeDeleteModal,onSubmit:this.handleDeleteAnswer}),ek&&(0,p.tZ)(eF.Z,{title:"隐藏答案",subtitle:"隐藏后该回答将不展示也不流通，是否确定隐藏？",shown:t0,onCancel:this.handleCollapseModalHide,onSubmit:this.handleUpdateAnswerCollapsed}),(0,p.tZ)(eQ.E,{id:a,type:"answer",shown:t1,onClose:this.handleFavlistHide,zaEnabled:!0}),tg&&this.state.guideShown&&(0,p.tZ)(ed.Z,{redirectUrl:this.href,buttons:[eV?{name:"wechat",text:"快速登录",fill:"#fff"}:"zhihu"],urlScheme:(0,em.MN)({type:"answer",id:a}),onClose:this.handleToggleGuide}),tb&&(0,p.BX)(en.ZP,{children:[(0,p.tZ)(ea.Z,{type:"answer",contentId:a,footerButton:"完成"}),(0,p.tZ)(eX.Z,{notification:eu,onRead:function(e){tf("answer",a,e)},onUseAdmire:function(){e.rewardContainerRef.current.activateReward()},onUseRecommend:function(){var t=e.props.postToolsRecommend;H.Z.confirm((0,p.tZ)("div",{style:{textAlign:"center"},children:"该推荐将使用本月的 1 次推荐次数。"}),{title:"确定是否推荐？"}).then(function(){return t("answer",String(a))},function(){})}})]}),(0,p.tZ)(eJ.Z,{show:nn&&!nM&&tg&&!eV&&!ec.dd,id:n.id,type:n.type,onCancel:function(){e.setState({showWechatExpand:!1},function(){ni||e.richContentRef.current.handleExpand()})},onSubmit:function(){e.setState({showWechatExpand:!1}),eV?nr?e.createOpenInAppHandler(ni?"expand_answer2":"expand_answer1")():e.setState({shownLoadingBar:!0}):e.createOpenInAppHandler(ni?"expand_answer2":"expand_answer1")()}}),(0,p.tZ)(ej.Z,{show:no&&!ec.dd,id:n.id,type:n.type,onCancel:function(){e.setState({skipModalShow:!1},function(){e.richContentRef.current.handleExpand()})},onSubmit:function(){e.createOpenInAppHandler("expand_answer",eK||eY)()}}),(0,p.tZ)(e$.Z,{show:na&&tg})]})}}]),n}(R.PureComponent);(0,r._)(tp,"contextTypes",{startAddAnswer:E().func}),(0,r._)(tp,"propTypes",{relatedTo:E().oneOf(["question","answer"]),editable:E().bool,preset:E().oneOf(["special-plain","plain","primary"]),lessExcerpt:E().bool,shareVideoDetail:E().object,formatContent:E().func,renderExtraOptions:E().func,zaInfos:E().object,onToggleExpand:E().func,renderActionButtons:E().func,canAbstract:E().bool,trackPromotionClick:E().func,isSearchSpecialSource:E().bool,hideCommercialInviteLabel:E().bool,hideCoCreationFeature:E().bool}),(0,r._)(tp,"defaultProps",{editable:!1,canAbstract:!1,isSearchSpecialSource:!1,preset:"primary",zaInfos:{},renderActionButtons:eT.W9,shouldAlwaysShowPlayer:!1,hideCoCreationFeature:!1}),t.Z=(0,P.compose)((0,eM.Ib)(function(e){var t=e.answer,n=e.index;return(0,d._)({content:{type:"Answer",token:String(t.id),id:String(t.id)}},void 0!==n&&{moduleIndex:n})}),(0,U.a)(function(e){var t=e.answer,n=e.trackCardShow,o=e.zaInfos,i=void 0===o?{}:o;return(0,l._)((0,d._)({module:"AnswerItem",card:{has_image:!!(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:!!(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Answer",token:t.id&&t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:new Date(t.createTime).getTime(),parent_token:t.question&&t.question.id.toString(),author_member_hash_id:t.author&&t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}},content:{type:"Answer",token:t.id}},i.index&&{index:i.index},i.cardShow&&{view:{id:i.cardShow}}),{trackCardShow:void 0===n||n})}),T.withRouter,ef.Z,(0,v.$_)({dataPath:"answer"}),v.OW,(0,M.connect)(function(e,t){var n,o,i=e.entities.drafts,a=e.question,r=(void 0===a?{}:a).draftStatus,s=e.answers,d=void 0===s?{}:s,l=d.paidContent,c=d.entityWords,u=d.relationEndorsement,h=e.reward,p=e.switches,m=e.video,w=(void 0===m?{}:m).shareVideoDetail,f=e.env,v=f.edition,g=f.userAgent,A=t.answer,C=t.relatedTo,S=t.location.pathname,_=S.split("/"),b=!1,y=!0;_[1]&&("org"===_[1]||"people"===_[1])&&(b=_[2]&&-1!==tu.indexOf(_[2]),y=!1);var k=(0,P.compose)(tc,tl)(th(e,t)),Z=(0,ey.ib)(e),I=["question","answer"].includes(C),x=(0,ek.H8)(e)&&I,E=(0,ek.cq)(e),R=g.Mobile,M=g.Qzone,T=(0,ee.YJ)(k.creationRelationship),B=(0,ey.pG)(e,T),N=null!==(o=null===(n=A.relationship)||void 0===n?void 0:n.isAuthor)&&void 0!==o?o:(0,ey.pG)(e,A.author);return{relationEndorsement:(void 0===u?{}:u)[A.id],entityWords:(void 0===c?{}:c)[A.id],draft:A&&(void 0===i?{}:i)["question_".concat(A.question.id)],draftStatus:null==r?void 0:r[A.question.id],answer:k,ua:(0,ek.Uh)(e),pathname:S,xiaomi:v.xiaomi,isShenma:v.shenma||/quark/gi.test(e.env.userAgent.origin)||g.UC,reward:h,switches:p,isHuman:x,shouldOia:(0,ek.XE)(e)&&!b,shouldSpecialOia:(0,ek.cq)(e)&&!b,isSpecialQuestionOrAnswer:(0,ek.hV)(e,{type:I&&C,id:I?"answer"===C?A.id:A.question.id:""}),isMobile:(0,ek.Hu)(e),isWechat:e.env.userAgent.Wechat,isHuaweiBrowser:/huaweibrowser/gi.test(e.env.userAgent.origin)||/huawei/gi.test(e.env.userAgent.origin)&&!e.env.userAgent.UC&&!e.env.userAgent.Wechat&&!e.env.userAgent.MQQBrowser&&!/quark/gi.test(e.env.userAgent.origin)&&!/baidu/gi.test(e.env.userAgent.origin),isHonor:/honor/gi.test(e.env.userAgent.origin)&&/MQQBrowser/gi.test(e.env.userAgent.origin),currentUser:Z,shareVideoDetail:w,isBrandAnswer:(0,eC.eP)(A),permission:(0,eI.hh)(e),ecommerce:(0,q.G_)(e,{type:"answer",urlToken:String(A.id)}),isBaidu:(0,ek.XE)(e)&&v.baidu,showCommentForOia:(0,ek.XE)(e),blockReading:R&&E&&!M,paidContent:void 0===l?{}:l,isMuteSpecial:(0,eI.gW)(k.question),isMuteFreeze:(0,eI.SZ)(k.question),isAuthor:N&&!B,isSubAuthor:B,isQuestionPage:y}},{updateAnswerReshipmentSettings:eC.eu,updateAnswerCommentPermission:eC.iM,updateAnswerCollapsed:eC.ON,updateAnswerStick:eC.Vc,deleteAnswer:eC.G,restoreAnswer:eC.f0,loadAnswerForSettings:eC.Hh,showNotification:eZ.c0,addAnnotation:eS.u,cancelAnnotation:eS.e,addRewardTagline:ex.OC,updateAnswerReward:eC.fT,loadAnswerRelationEndorsement:eC.Uk,fillCurrentUserIfNeeded:ey.sF,loadVideoDetails:eE.hK,readContentRightsNotification:e_.Uq,postToolsRecommend:eb.XX4,showMobileSignInModal:eI.Ky,loadAnswerEntityWords:eC.Pe}),(0,eP._)({dataPath:"answer"}),(0,eg.w)("AnswerItem"),eA.FK,(0,ti.S)(function(e){return(0,eh.XV)(e.answer)?"/api/v4/kvip/content/answers/".concat(e.answer.id,"/paid_content"):null}),(0,ev.U)(function(e){return(0,eh.Y)(e.answer)?"/api/v4/column/paid-column/card?content_type=answer&content_id=".concat(e.answer.id):null}))(tp)}}]);
//# sourceMappingURL=lib-2ec050f6.app.9d36ff4f103fb294ee49.js.map